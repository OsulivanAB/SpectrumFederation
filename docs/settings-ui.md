# Settings UI Guide

## Overview

The Settings Window provides a comprehensive interface for managing all addon configuration, viewing logs, and accessing debug tools. Access it with the `/sf` slash command.

## Opening the Settings Window

- Type `/sf` in chat
- Press `ESC` to close
- Click the X button to close
- Window position is saved automatically

## Tabs

### Main Tab

The Main tab displays your current roster and addon settings.

**Features:**
- **Roster Display**: Shows all characters in your active profile with their current points
  - Scrollable list (supports up to 15 visible entries)
  - Automatically refreshes when switching profiles
- **Version Information**: Displays the current addon version
- **Window Style Selector**: Choose from 5 visual themes
  - Default: Standard WoW dialog style
  - Dark: Dark background with subtle borders
  - Light: Light background for high-contrast environments
  - Transparent: Semi-transparent for minimal visual impact
  - Solid: Clean, modern solid color theme
  - Applies to all addon windows immediately

### Loot Tab

The Loot tab manages point history, profiles, and loot window settings.

#### Loot Log Viewer

Displays a complete history of all point changes.

**Columns:**
- **Timestamp**: Date and time of the change (YYYY-MM-DD HH:MM:SS)
- **Character**: Character name-realm
- **Change**: Point amount (green for positive, red for negative)
- **Reason**: Why points were awarded or deducted
- **Profile**: Which profile the change belongs to

**Filtering:**
- **Character Filter**: Type a character name to search (case-insensitive, substring match)
  - Example: typing "sha" shows all characters with "sha" in their name
- **Profile Filter**: Choose between:
  - **Current**: Show only logs from the active profile
  - **All Profiles**: Show logs from all profiles combined

**Display:**
- Newest entries appear at the top
- Scrollable (shows 12 entries at a time)
- Long reasons are truncated with "..." (hover to see full text in tooltip - future feature)

#### Profile Management

Manage multiple independent point pools.

**Profile Dropdown:**
- Shows current active profile
- Click to see all available profiles
- Select a profile to switch to it instantly
- All displays update automatically

**Create Profile Button:**
- Opens a dialog to name the new profile
- Profile names must be:
  - 1-64 characters
  - Unique (no duplicates)
- New profiles start with zero points and no logs

**Delete Profile Button:**
- Opens confirmation dialog
- Cannot delete:
  - The currently active profile
  - The last remaining profile
- Deleted profiles cannot be recovered

#### Loot Window Controls

**Show Loot Window Checkbox:**
- Check to show the loot point adjustment window
- Uncheck to hide it
- State persists across sessions

**Manual Sync Button:**
- Triggers manual synchronization with other players
- *Note: Full manual sync implementation coming in Phase 2*

### Debug Tab

The Debug tab provides advanced logging and troubleshooting tools.

#### Debug Log Viewer

Displays all debug messages generated by the addon.

**Features:**
- Scrollable text box with up to 500 log entries
- Newest entries appear at the top
- Manually select text to copy (right-click â†’ Copy)
- Logs persist across sessions

**Log Format:**
```
[HH:MM:SS] [LEVEL] [CATEGORY] Message
```

Example:
```
[14:23:45] [INFO] [SETTINGS] Settings window shown
[14:23:47] [VERBOSE] [SETTINGS] Selected tab 2 (Loot)
[14:23:50] [WARN] [SYNC] No response from sync request
```

**Filtering:**
- **Level Filter**: Show only specific log levels
  - All: Show all messages
  - VERBOSE: Detailed debugging information
  - INFO: General informational messages
  - WARN: Warnings about potential issues
  - ERROR: Error messages
- **Category Filter**: Type to search log categories
  - Example: typing "sync" shows only sync-related logs
  - Case-insensitive substring match

#### Debug Controls

**Enable Debug Logging Checkbox:**
- Check to enable debug logging
- Uncheck to disable
- When disabled, no new logs are created
- Existing logs are preserved

**Clear Logs Button:**
- Opens confirmation dialog
- Permanently deletes all debug logs
- Cannot be undone

**Refresh Button:**
- Manually refreshes the log display
- Useful after changing filters
- Auto-refreshes when new logs are added

## Slash Commands

### `/sf`
Opens the settings window.

**Usage:**
```
/sf
```

### `/sf loot`
Toggles the loot window visibility (shows/hides the point adjustment window).

**Usage:**
```
/sf loot
```

### `/sf debug`
Toggles debug logging on or off.

**Usage:**
```
/sf debug
```

**Output:**
```
[Spectrum Federation] Debug logging enabled
```
or
```
[Spectrum Federation] Debug logging disabled
```

### `/sf help`
Shows a list of available commands.

**Usage:**
```
/sf help
```

**Output:**
```
Spectrum Federation Commands:
  /sf - Open settings window
  /sf loot - Toggle loot window visibility
  /sf debug - Toggle debug logging on/off
  /sf help - Show this help message
```

### `/sfdebug` (Legacy)
Legacy debug commands for compatibility.

**Usage:**
```
/sfdebug on     - Enable debug logging
/sfdebug off    - Disable debug logging
/sfdebug show   - Open settings window to debug tab
```

## Tips & Tricks

### Quick Navigation
- Use number keys `1`, `2`, `3` to switch between tabs (future feature)
- `ESC` key closes the settings window from any tab

### Filter Performance
- Character and category filters update as you type
- Clear filters by deleting all text in the filter box
- Filters are not saved - they reset when you close the window

### Profile Workflow
1. Create separate profiles for different raid tiers or content types
2. Use "All Profiles" filter to see complete history across profiles
3. Switch profiles before raid nights to track points independently

### Debug Best Practices
- Keep debug logging disabled during normal play to avoid clutter
- Enable temporarily when troubleshooting sync issues
- Use level filters to focus on errors/warnings
- Clear logs periodically to keep file size manageable

### Window Styling
- Choose "Transparent" for minimal screen space usage
- Use "Dark" in low-light environments
- "Light" theme works well with bright UI mods
- Backdrop style applies immediately to all windows

## Keyboard Shortcuts

*Planned for future release*

- `Ctrl+S` - Toggle settings window
- `Ctrl+L` - Toggle loot window
- `Ctrl+D` - Toggle debug logging

## Troubleshooting

### Settings window won't open
- Try `/reload` to reload the UI
- Check for Lua errors with `/console scriptErrors 1`
- Verify addon is enabled in the addon list

### Roster not showing
- Ensure you have an active profile (check profile dropdown)
- Try switching profiles and back
- Click refresh if available

### Logs not displaying
- Check if filters are applied (clear all filters)
- Verify debug logging is enabled (for debug logs)
- Check "All Profiles" if you recently switched profiles

### Window position resets
- Make sure you're not closing with Alt+F4 (use ESC or X button)
- Check that SavedVariables are not being reset by another addon
- Window positions save on normal logout/exit

### Backdrop style not applying
- Try selecting a different style and back again
- Check that no other addon is overriding frame backdrops
- `/reload` after changing styles

## Future Enhancements

Planned features for upcoming releases:

- Minimap button for quick access
- Export log data to CSV
- Import/Export profile data
- Custom backdrop creator
- Keybindings for slash commands
- Tooltip support for truncated log reasons
- Tab navigation with number keys
- Search within debug logs
- Log level color coding in debug viewer